apiVersion: v1
kind: Namespace
metadata:
  creationTimestamp: null
  name: redistest
spec: {}
status: {}
---
apiVersion: v1
data:
  cachehost: akscache.redis.cache.windows.net
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: redis
  namespace: redistest
---
apiVersion: v1
data:
  cachekey: bVNkOG9sQUsyK2RLQTVlNXRzbGw2SUJMZ3psQldieWgrZVhpM0FIenplTT0=
kind: Secret
metadata:
  creationTimestamp: null
  name: redis
  namespace: redistest
---
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: null
  labels:
    run: redistest
  name: redistest
  namespace: redistest
spec:
  containers:
  - image: surenmcode/redisbench:1.0.9
    imagePullPolicy: Always
    name: redisbench 
    command: ["/bin/sh"]
    args: ["-c", "while true; do ./init.sh; sleep 10; done"]     
    resources: {}
    env:
    - name: CACHE_HOST
      valueFrom:
        configMapKeyRef:
          name: redis
          key: cachehost
    - name: CACHE_KEY
      valueFrom:
        secretKeyRef:
          name: redis
          key: cachekey
  dnsPolicy: ClusterFirst
  restartPolicy: Always  
status: {}
